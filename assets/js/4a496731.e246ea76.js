"use strict";(self.webpackChunkopen_edu_methodology=self.webpackChunkopen_edu_methodology||[]).push([[921],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>u});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=o.createContext({}),c=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},p=function(e){var t=c(e.components);return o.createElement(l.Provider,{value:t},e.children)},m="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},h=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),m=c(n),h=r,u=m["".concat(l,".").concat(h)]||m[h]||d[h]||i;return n?o.createElement(u,a(a({ref:t},p),{},{components:n})):o.createElement(u,a({ref:t},p))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,a=new Array(i);a[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[m]="string"==typeof e?e:r,a[1]=s;for(var c=2;c<i;c++)a[c]=n[c];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}h.displayName="MDXCreateElement"},372:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var o=n(7462),r=(n(7294),n(3905));const i={},a="Example - Memory Allocator",s={unversionedId:"Developing and Organizing Content/Projects/guide",id:"Developing and Organizing Content/Projects/guide",title:"Example - Memory Allocator",description:"To better understand how to plan and structure a project, let us walk through the Memory Allocator project, from the Operating Systems repository step by step.",source:"@site/docs/Developing and Organizing Content/Projects/guide.md",sourceDirName:"Developing and Organizing Content/Projects",slug:"/Developing and Organizing Content/Projects/guide",permalink:"/methodology/Developing and Organizing Content/Projects/guide",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"sidebar",previous:{title:"Projects",permalink:"/methodology/Developing and Organizing Content/Projects/read"},next:{title:"Using and Delivering Content",permalink:"/methodology/Using and Delivering Content/"}},l={},c=[{value:"Storing the Project",id:"storing-the-project",level:2},{value:"Project Statement",id:"project-statement",level:3},{value:"Support Files",id:"support-files",level:3},{value:"Utility Files",id:"utility-files",level:3},{value:"Automated Validators",id:"automated-validators",level:3},{value:"Good Practices",id:"good-practices",level:2}],p={toc:c},m="wrapper";function d(e){let{components:t,...i}=e;return(0,r.kt)(m,(0,o.Z)({},p,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"example---memory-allocator"},"Example - Memory Allocator"),(0,r.kt)("p",null,"To better understand how to plan and structure a project, let us walk through the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/open-education-hub/operating-systems/tree/main/content/assignments/memory-allocator"},"Memory Allocator project"),", from the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/open-education-hub/operating-systems/"},"Operating Systems repository")," step by step."),(0,r.kt)("h2",{id:"storing-the-project"},"Storing the Project"),(0,r.kt)("p",null,"The project structure adheres to what we described earlier, with the mention that the ",(0,r.kt)("inlineCode",{parentName:"p"},"assets/")," corresponds to ",(0,r.kt)("inlineCode",{parentName:"p"},"media/")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"tests/")," corresponds to ",(0,r.kt)("inlineCode",{parentName:"p"},"checker/"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"|-- README.md\n|-- assets (media)\n|\xa0\xa0 |-- coalesce-blocks.svg\n|\xa0\xa0 |-- memory-block.svg\n|\xa0\xa0 `-- split-block.svg\n|-- utility\n|   |-- printf.c\n|   `-- printf.h\n|-- skeleton\n|\xa0\xa0 |-- Makefile\n|\xa0\xa0 |-- helpers.h\n|\xa0\xa0 |-- helpers.c\n|\xa0\xa0 `-- osmem.h\n`-- tests (checker)\n \xa0\xa0 |-- Makefile\n \xa0\xa0 |-- src\n \xa0\xa0 |-- ref\n \xa0\xa0 `-- checker.py\n")),(0,r.kt)("h3",{id:"project-statement"},"Project Statement"),(0,r.kt)("p",null,"The project statement begins by outlining the key concepts a learner should understand upon project completion.\nIt also provides a brief project description and introduces the directory structure."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-md"},"## Objectives\n\n- Learn the basics of memory management.\n- Accommodate with the memory management syscalls in Linux.\n- Understand the bottlenecks of memory allocation and how to reduce them.\n\n## Description\n\nBuild a minimalistic memory allocator that can be used to manually manage virtual memory.\nThe goal is to have a reliable library that accounts for explicit allocation, reallocation, and initialization of memory.\n\n## Support Files\n\nThe support files consists of three directories:\n\n- `skeleton/` will contain your solution\n- `tests/` contains the test suite and a `Python` script to verify your work\n- `utils/` contains an implementation for `printf()` function that does **not** use the heap\n")),(0,r.kt)("p",null,"The following two sections, namely ",(0,r.kt)("inlineCode",{parentName:"p"},"API")," (Application Programming Interface) and ",(0,r.kt)("inlineCode",{parentName:"p"},"Implementation"),",",(0,r.kt)("inlineCode",{parentName:"p"},"offer descriptions of the tasks.\nWhile these titles are customized to suit the project's **Computer Science** context, they could easily be combined into a single section with a more generic title like"),"Tasks`."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"API")," section gives a brief an overview of the tasks, specifying their requirements without going into deep details.\nIt concludes with some general insights that are not tied to individual tasks but contribute to enhancing the overall project workflow."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-md"},"## API\n\n1. `void *os_malloc(size_t size)`\n\n   Allocates `size` bytes and returns a pointer to the allocated memory.\n\n1. `void *os_calloc(size_t nmemb, size_t size)`\n\n   Allocates memory for an array of `nmemb` elements of `size` bytes each and returns a pointer to the allocated memory.\n\n1. `void *os_realloc(void *ptr, size_t size)`\n\n   Changes the size of the memory block pointed to by `ptr` to `size` bytes.\n   If the size is smaller than the previously allocated size, the memory block will be truncated.\n\n1. `void os_free(void *ptr)`\n\n   Frees memory previously allocated by `os_malloc()`, `os_calloc()` or `os_realloc()`.\n\n1. General\n\n   - You are allowed to use `sbrk()` instead of `brk()`, in view of the fact that [on Linux](https://man7.org/linux/man-pages/man2/brk.2.html#NOTES) `sbrk()` is implemented using the `brk()`.\n   - You must check the error code returned by every syscall.\n\n")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"Implementation")," section provides guidance on how to address particular implementation aspects.\nIts aim is to ensure that all solutions align with the checker's requirements and adhere to consistent conventions.\nThis section is also where we introduce new concepts.\nWe explain these concepts by connecting them to previously explained material and highlighting their significance.\nTo support our explanations, we include media files and references to promote deeper understanding.\nThese references can be found in the ",(0,r.kt)("inlineCode",{parentName:"p"},"Resources")," section."),(0,r.kt)("p",null,"In the context of the ",(0,r.kt)("inlineCode",{parentName:"p"},"Memory Allocator")," project, one such concept is the ",(0,r.kt)("inlineCode",{parentName:"p"},"Split Block"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-md"},"## Implementation\n\n[...]\n\n#### Split Block\n\nReusing memory blocks improves the allocator's performance, but might lead to [Internal Memory Fragmentation](https://www.tutorialspoint.com/difference-between-internal-fragmentation-and-external-fragmentation#:~:text=What%20is%20Internal%20Fragmentation%3F).\nThis happens when we allocate a size smaller than all available free blocks.\nIf we use one larger block the remaining size of that block will be wasted since it cannot be used for another allocation.\n\nTo avoid this, a block should be truncated to the required size and the remaining bytes should be used to create a new free block.\n")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Split Block",src:n(1167).Z,width:"662",height:"282"})),(0,r.kt)("p",null,"Once the project tasks have been thoroughly explained, our focus shifts to the submission and grading process.\nIn this section, we provide details about the prerequisites for using the ",(0,r.kt)("inlineCode",{parentName:"p"},"checker")," and offer an illustrative example of a successful run."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-md"},"## Testing and Grading\n\nThe testing is automated and performed with the `checker.py` script from the `tests/` directory.\n\nBefore running `checker.py`, you first have to build `libosmem.so` in the `skeleton/` directory and generate the test binaries in `tests/bin`.\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-console"},"student@os:~/.../assignments/mem-alloc/tests$ make\ngcc -I../utils -fPIC -Wall -Wextra -g -o bin/test-all src/test-all.c -L../allocator -losmem\ngcc -I../utils -fPIC -Wall -Wextra -g -o bin/test-calloc-arrays src/test-calloc-arrays.c -L../allocator -losmem\n[...]\n")),(0,r.kt)("h3",{id:"support-files"},"Support Files"),(0,r.kt)("p",null,"The skeleton files are:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Makefile")," which automates the process of building the solution"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"osmem.c")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"osmem.h"),", which serve as templates for learners to work on.\nLearners are expected to write their code in the designated ",(0,r.kt)("strong",{parentName:"li"},"TODO")," sections, which follow the structure described the ",(0,r.kt)("inlineCode",{parentName:"li"},"API")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"Implementation")," sections.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-C"},"void *os_malloc(size_t size)\n{\n    /* TODO: Implement os_malloc */\n    return NULL;\n}\n\nvoid os_free(void *ptr)\n{\n    /* TODO: Implement os_free */\n}\n\nvoid *os_calloc(size_t nmemb, size_t size)\n{\n    /* TODO: Implement os_calloc */\n    return NULL;\n}\n\nvoid *os_realloc(void *ptr, size_t size)\n{\n    /* TODO: Implement os_realloc */\n    return NULL;\n}\n")),(0,r.kt)("h3",{id:"utility-files"},"Utility Files"),(0,r.kt)("p",null,"In this project, we have utilized the ",(0,r.kt)("inlineCode",{parentName:"p"},"utility/")," directory to offer an alternative implementation for a commonly used function, ",(0,r.kt)("inlineCode",{parentName:"p"},"printf()"),".\nThis approach simplifies the design of the memory allocator and prevents lengthy output, resulting in a more instructive project.\nThese files are not supposed to be changed and do not affect the grading process."),(0,r.kt)("h3",{id:"automated-validators"},"Automated Validators"),(0,r.kt)("p",null,"These files are located in the ",(0,r.kt)("inlineCode",{parentName:"p"},"tests/")," directory.\nThis naming choice deviates from the conventional ",(0,r.kt)("inlineCode",{parentName:"p"},"checker/")," name, primarily due to compatibility issues with the grading platform we used, but the structure remains consistent."),(0,r.kt)("p",null,"The program used to grade the project's solution is named ",(0,r.kt)("inlineCode",{parentName:"p"},"checker.py"),".\nBehind the scenes, this program utilizes sample C programs located in the ",(0,r.kt)("inlineCode",{parentName:"p"},"tests/src/")," directory, which it links with the dynamic library created by the learners.\nSubsequently, it executes the resulting binary and verifies whether it makes the correct system calls.\nThis verification is done by comparing the system calls made by the binary to those listed in a reference file situated in the ",(0,r.kt)("inlineCode",{parentName:"p"},"tests/ref/")," directory."),(0,r.kt)("p",null,"If the program's output does not match the reference files, the checker provides a list of discrepancies.\nThese discrepancies serve as hints for the learners, indicating where the differences between the expected and actual outputs exist."),(0,r.kt)("h2",{id:"good-practices"},"Good Practices"),(0,r.kt)("p",null,"Drawing from our experience, we offer the following recommendations:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"When designing the assignment, prioritize its educational value over its length."),(0,r.kt)("p",{parentName:"li"},"This approach ensures that the assignment reflects real-world situations rather than resorting to shortcuts to make it more manageable.\nIf the assignment turns out to encompass too much content for the given timeframe, consider dividing it into multiple projects or designating certain tasks as bonus.\nThe key principle here is to prioritize consistency and quality to deliver an authentic learning experience.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Develop the project statement simultaneously with the reference solution."),(0,r.kt)("p",{parentName:"li"},"This approach guarantees that the project statement encompasses all necessary elements and provides an estimate of the time needed to complete the project.\nurthermore, grading and submission workflows can be improved based on the reference solution.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Implement Feedback Loops"),(0,r.kt)("p",{parentName:"li"},"It's beneficial to involve someone external to the development team to review the proposed points.\nAsk them to assess the simplicity of the workflow, the clarity of the questions, and estimate the time required for completion once in a while."),(0,r.kt)("p",{parentName:"li"},"As the project approaches its final stages, have several individuals attempt to solve it while support is available.\nThis helps prepare the infrastructure and may lead to project statement improvements based on their questions and feedback."))))}d.isMDXComponent=!0},1167:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/split-block-0e690e7363ed4af850595e15c0f8cd7e.svg"}}]);